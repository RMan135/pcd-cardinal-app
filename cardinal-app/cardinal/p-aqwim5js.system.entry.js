System.register(["./p-3369a689.system.js"],(function(e){"use strict";var t,n,r,o;return{setters:[function(e){t=e.r;n=e.c;r=e.h;o=e.g}],execute:function(){var s=e("psk_ss_app",function(){function e(e){t(this,e);this.giveMeSeed=n(this,"giveMeSeed",7)}e.prototype.componentDidLoad=function(){var e=this;var t=this.element.querySelector("iframe");window.addEventListener("message",(function(n){if(n.data.appIdentity){if(n.data.appIdentity===e.digestSeedHex){t.contentWindow.postMessage({seed:e.seed},t.src)}n.stopImmediatePropagation()}if(n.data.status==="completed"){t.contentWindow.location.reload();n.stopImmediatePropagation()}}))};e.prototype.getSWOnMessageHandler=function(){var e=this;if(this.onServiceWorkerMessageHandler){return this.onServiceWorkerMessageHandler}this.onServiceWorkerMessageHandler=function(t){if(!t.data||t.data.query!=="seed"){return}var n=t.data.identity;if(n===e.digestSeedHex){t.source.postMessage({seed:e.seed})}};return this.onServiceWorkerMessageHandler};e.prototype.connectedCallback=function(){navigator.serviceWorker.addEventListener("message",this.getSWOnMessageHandler())};e.prototype.disconnectedCallback=function(){navigator.serviceWorker.removeEventListener("message",this.getSWOnMessageHandler())};e.prototype.componentWillLoad=function(){var e=this;return new Promise((function(t){e.giveMeSeed.emit({appName:e.appName,callback:function(n,r){if(n){throw n}e.seed=r;e.digestSeedHex=e.digestMessage(r);t()}})}))};e.prototype.sendMessageToIframe=function(e,t){var n=function(t){$$.interactions.startSwarmAs(e,"echo","say",t).onReturn((function(e,t){if(!e){console.log("Iframe received: ",t);setTimeout((function(){}),1e4)}else{console.log(e)}}))};n(t)};e.prototype.digestMessage=function(e){var t=require("pskcrypto");var n=t.pskHash(e,"hex");return n};e.prototype.render=function(){var e=window.parent.location+"iframe/"+this.digestSeedHex;return r("iframe",{sandbox:"allow-scripts allow-same-origin allow-forms",frameborder:"0",style:{overflow:"hidden",height:"100%",width:"100%"},src:e})};Object.defineProperty(e.prototype,"element",{get:function(){return o(this)},enumerable:true,configurable:true});return e}())}}}));